{% extends 'tableapp/base.html' %}

{% block content %}
<h2 class="page-title mb-3">ðŸ“„ PVO Registro</h2>

<div class="card">
  <div class="table-responsive">
    <table class="table table-hover custom-table">
      <thead class="table-header">
        <tr>
          <th class="text-center">ID</th>
          <th class="text-center">PID</th>  
          <th>FULL</th>
          <th>FLP</th>
          <th>FEF</th>
          <th>Actualizado por</th>
          <th>Ãšltima fecha</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for r in registros %}
        <tr>
          <td class="text-center">{{ r.id }}</td>
          <td class="text-center">{{ r.pid }}</td>  
          <td>{{ r.fecha_full|default:"â€”" }}</td>
          <td>{{ r.fecha_flp|default:"â€”" }}</td>
          <td>{{ r.fecha_fef|default:"â€”" }}</td>
          <td>{{ r.creado_por.username }}</td>
          <td>{{ r.fecha_creacion|date:"Y-m-d H:i" }}</td>
          <td class="text-center">
            <button class="btn btn-sm btn-outline-primary"
                    hx-get="{% url 'pvo_edit' r.id %}" 
                    hx-target="#modal-content"
                    hx-trigger="click"
                    _="on htmx:afterOnLoad wait 10ms then add .show to #htmxModal">
              <i class="ti ti-edit"></i> Editar
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<style>
  /* Color encabezado forzado */
  .table-header {
    background-color: #1e293b !important;
    color: white !important;
  }

  /* Filas alternas suaves */
  .custom-table tbody tr:nth-child(odd) {
    background-color: #f9fafb;
  }

  .custom-table tbody tr:hover {
    background-color: #edf2f7;
  }

  .custom-table th, .custom-table td {
    vertical-align: middle;
  }

  .btn-outline-primary {
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  /* Reducir espacio debajo del tÃ­tulo */
  .page-title {
    margin-bottom: 0.5rem;
  }
</style>

{% include 'tableapp/modal.html' %}
{% endblock %}
